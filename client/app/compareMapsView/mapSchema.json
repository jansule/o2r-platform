{
    "$schema": "http://json-schema.org/draft-04/schema#",
    "title": "map schema",
    "description": "Schema of a thematic map",
    "type": "object",
    "definitions": {
        "AdditionalInfo": {
            "description": "Optional Information, that is not part of core elements of map",
            "type": "object",
            "properties": {
                "Label": {
                    "description": "Properties of map labels",
                    "type": "object",
                    "properties": {
                        "DataType": {
                            "$ref": "#/definitions/DataType"
                        },
                        "PropertyName": {
                            "type": "string",
                            "description": "Name of property, that is displayed"
                        },
                        "Show": {
                            "type": "boolean",
                            "description": "True, if labels are displayed"
                        }
                    },
                    "required": ["DataType", "PropertyName", "Show"]
                },
                "Table": {
                    "description": "Properties of table that belongs to map",
                    "type": "object",
                    "properties": {
                        "PropertyNames": {
                            "description": "Name of property, that is displayed",
                            "type": "array",
                            "items": {
                                "type": "string"
                            }
                        },   
                        "Show": {
                            "description": "True, if table is displayed",
                            "type": "boolean"
                        }
                    },
                    "required": ["PropertyNames", "Show"]
                }
            },
            "required": ["Label", "Table"]
        },
        "Choropleth": {
            "description": "Properties for choropleth map",
            "type": "object",
            "properties": {
                "Fill": {
                    "description": "Properties of polygon fill",
                    "type": "object",
                    "properties": {
                        "Fill": {
                            "description": "Fill color of polygons. Contains array of hexcodes",
                            "type": "array",
                            "items": {
                                "type": "string"
                            }
                        },
                        "FillOpacity": {
                            "description": "Opacity of fill color",
                            "type": "number"
                        }
                    },
                    "required": ["Fill", "FillOpacity"]
                },
                "Legend": {
                    "description": "Properties about the choropleth legend",
                    "type": "object",
                    "properties": {
                        "DisplayMin": {
                            "description": "True, if minimum value is displayed",
                            "type": "boolean"
                        },
                        "DisplayMax": {
                            "description": "True, if maximum value is displayed",
                            "type": "boolean"
                        },
                        "Title": {
                            "description": "Legend title",
                            "type": "string"
                        },
                        "Position": {
                            "description": "Position of legend in map frame",
                            "type": "string",
                            "enum": ["topleft", "topright", "bottomleft", "bottomright"]
                        }
                    },
                    "required": ["DisplayMin", "DisplayMax", "Title", "Position"]
                },
                "Classes": {
                    "description": "Properties of classification of choropleth",
                    "type": "object",
                    "properties": {
                        "Classes": {
                            "description": "Class breaks. Will be evaluated with LESSTHAN",
                            "type": "array",
                            "items": {
                                "type": "number"
                            }
                        },
                        "NrOfClasses": {
                            "description": "Number of classes",
                            "type": "number"
                        }
                    },
                    "required": ["Classes", "NrOfClasses"]
                },
                "Stroke": {
                    "description": "Properties of polygon stroke",
                    "type": "object",
                    "properties": {
                        "Stroke": {
                            "description": "Stroke color of polygon as hexcode",
                            "type": "string"
                        },
                        "StrokeWidth": {
                            "description": "Stroke Width",
                            "type": "number"
                        }
                    },
                    "required": ["Stroke", "StrokeWidth"]
                },
                "Type": {
                    "description": "Thematic map type",
                    "type": "string",
                    "enum": ["choropleth"]
                }
            },
            "required": ["Classes", "Fill", "Legend", "Stroke", "Type"]
        },
        "DataType": {
            "description": "Data type of value",
            "type": "string",
            "enum": ["string", "integer", "float", "double"]
        },
        "Property": {
            "description": "Properties of value that is being displayed",
            "type": "object",
            "properties": {
                "DataType": {
                    "$ref": "#/definitions/DataType"
                },
                "Max": {
                    "description": "Maximum value found",
                    "type": "number"
                },
                "Min": {
                    "description": "Minimum value found",
                    "type": "number"
                },
                "PropertyName": {
                    "description": "Attribute name of property",
                    "type": "string"
                },
                "ScaleOfMeasurement": {
                    "description": "Scale of measurement of property",
                    "type": "string",
                    "enum": ["nominal", "ordinal", "numerical"]
                },
                "ZoomFactor": {
                    "description": "Default zoom factor for map",
                    "type": "number"
                }
            },
            "required": ["DataType", "Max", "Min", "PropertyName", "ScaleOfMeasurement", "ZoomFactor"]
        },
        "ProportionalSymbol": {
            "description": "Properties for proportional symbol map",
            "type": "object",
            "properties": {
                "Fill": {
                    "description": "Fill color of symbol as hexcode",
                    "type": "string"
                },
                "Legend": {
                    "description": "Properties of legend for proportional symbol map",
                    "type": "object",
                    "properties": {
                        "NrOfSymbols": {
                            "description": "Number of symbols displayed in legend",
                            "type": "integer"
                        },
                        "DisplayMaxSize": {
                            "description": "True, if legend contains maximum value as reference symbol",
                            "type": "boolean"
                        },
                        "DisplayMinSize": {
                            "description": "True, if legend contains minimum value as reference symbol",
                            "type": "boolean"
                        },
                        "DisplayMax": {
                            "description": "True, if maximum value is displayed",
                            "type": "boolean"
                        },
                        "DisplayMin": {
                            "description": "True, if minimum value is displayed",
                            "type": "boolean"
                        },
                        "Title": {
                            "description": "Legend title",
                            "type": "string"
                        },
                        "Position": {
                            "description": "Legend position in map frame",
                            "type": "string",
                            "enum": ["topleft", "topright", "bottomleft", "bottomright"]
                        }
                    },
                    "required": ["NrOfSymbols", "DisplayMaxSize", "DisplayMinSize", "DisplayMax", "DisplayMin", "Title", "Position"]
                },
                "Polygon": {
                    "description": "Properties of polygon",
                    "type": "object",
                    "properties": {
                        "Fill": {
                            "description": "Properties of polygon fill",
                            "type": "object",
                            "properties": {
                                "Fill": {
                                    "description": "Fill color of polygon as hexcode",
                                    "type": "string"
                                },
                                "FillOpacity": {
                                    "description": "Opacity of polygon fill",
                                    "type": "number"
                                }
                            },
                            "required": ["Fill", "FillOpacity"]
                        },
                        "Stroke": {
                            "description": "Properties of polygon stroke",
                            "type": "object",
                            "properties": {
                                "Stroke": {
                                    "description": "Stroke color of polygon as hexcode",
                                    "type": "string"
                                },
                                "StrokeWidth": {
                                    "description": "Stroke width of polygon",
                                    "type": "number"
                                }
                            },
                            "required": ["Stroke", "StrokeWidth"]
                        }
                    }
                },
                "RadialFactor": {
                    "description": "Constant factor for symbol size. This factor will be mulitplied with the specific symbol value",
                    "type": "number"
                },
                "Stroke": {
                    "description": "Properties about symbol stroke",
                    "type": "object",
                    "properties": {
                        "Stroke": {
                            "description": "Stroke color as hexcode",
                            "type": "string"
                        },
                        "StrokeWidth": {
                            "description": "Stroke width",
                            "type": "number"
                        }
                    }
                },
                "Type": {
                    "description": "Thematic map type",
                    "type": "string",
                    "enum": ["proportionalSymbol"]
                },
                "WellKnownName": {
                    "description": "Characteristical name of symbol type",
                    "type": "string",
                    "enum": ["circle", "square", "other"]
                }
            },
            "required": ["Fill", "Legend", "Polygon", "RadialFactor", "Stroke", "Type", "WellKnownName"]
        }
    },
    "properties": {
        "AdditionalInfo": {
            "$ref": "#/definitions/AdditionalInfo"
        },
        "Property": {
            "$ref": "#/definitions/Property"
        },
        "Raw": {
            "type": "object",
            "description": "Contains geojson"
        },
        "ThematicType": {
            "type": "object",
            "oneOf": [
                {"$ref": "#/definitions/Choropleth"},
                {"$ref": "#/definitions/ProportionalSymbol"}
            ]
        }
    },
    "required": [
        "AdditionalInfo",
        "Property",
        "Raw",
        "ThematicType"
    ]
}